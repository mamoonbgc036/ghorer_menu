import{d as l,k as n,f as e,r as g,c as F,o as K,w as X,a as Z,e as p,t as o,m as k,q as M,n as m,l as w,F as C,h as v,u as b,i as N,E as ee,v as te,J as se,z as ae}from"./app-DBtr3_Li.js";import{C as re,Y as oe,G as le,V as ne,S as ie,_ as de}from"./CustomerLayout-DHGMSt5G.js";import{_ as ce}from"./_plugin-vue_export-helper-DlAUqK2U.js";function ue(d,i){return l(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 12h14"})])}function ge(d,i){return l(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}const xe={class:"max-w-7xl mx-auto px-4 sm:px-6"},me={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6"},ye={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between"},ve={class:"flex-1"},fe={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},he={class:"mt-2 flex flex-wrap items-center gap-4"},pe={class:"inline-flex items-center text-gray-600 dark:text-gray-400"},be={class:"inline-flex items-center text-gray-600 dark:text-gray-400"},_e={class:"mt-4 lg:mt-0"},ke={class:"flex flex-col items-end"},we={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},Ce={key:0,class:"text-sm text-gray-600 dark:text-gray-400"},Se={class:"text-sm text-gray-600 dark:text-gray-400"},je={class:"min-h-screen bg-gray-50 dark:bg-gray-900 w-full"},Te={class:"container mx-auto px-4 py-8"},Ie={class:"grid grid-cols-1 lg:grid-cols-4 gap-6"},Fe={class:"lg:col-span-1"},Me={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg sticky top-24 p-6"},Oe={class:"space-y-2"},Ve=["onClick"],$e={class:"font-medium"},De={class:"text-sm bg-indigo-50 dark:bg-indigo-900/20 px-2.5 py-1 rounded-full"},qe={class:"lg:col-span-2 rounded-2xl bg-white dark:bg-gray-900 shadow-md"},Be=["id"],Ee={class:"dark:bg-gray-800 text-center rounded-t-2xl"},Ne={class:"text-3xl font-bold text-gray-900 dark:text-white"},Ue={class:"text-gray-600 dark:text-gray-400 leading-relaxed"},Ae={class:"grid grid-cols-1 gap-6"},Le={class:"relative h-56"},ze=["src","alt"],Je={key:1,class:"absolute inset-0 bg-black bg-opacity-60 flex items-center justify-center"},Ye={class:"p-6"},Ge={class:"flex justify-between items-start mb-4"},Qe={class:"text-xl font-semibold text-gray-900 dark:text-white"},He={class:"text-gray-600 dark:text-gray-400 line-clamp-2"},Pe={class:"flex space-x-2 items-center"},Re={key:0,class:"fas fa-leaf text-green-500 text-lg",title:"Vegetarian"},We={key:1,class:"fas fa-pepper-hot text-red-500 text-lg",title:"Spicy"},Ke={class:"space-y-2 text-sm text-gray-600 dark:text-gray-400 mb-4"},Xe={class:"flex items-center gap-2"},Ze={key:0,class:"flex items-center gap-2"},et={class:"flex justify-between items-center border-t border-gray-200 dark:border-gray-700 pt-4"},tt={class:"flex items-center gap-3"},st={class:"text-xl font-bold text-gray-900 dark:text-white"},at={key:0,class:"text-sm text-gray-500 dark:text-gray-400 line-through"},rt=["onClick","disabled"],ot={class:"fixed inset-0 overflow-y-auto"},lt={class:"flex min-h-full items-center justify-center p-4"},nt={class:"mt-4"},it={class:"text-sm text-gray-600 dark:text-gray-400"},dt={key:0,class:"mt-6"},ct={class:"mt-2 space-y-2"},ut=["value"],gt={class:"ml-3 text-sm text-gray-700 dark:text-gray-300"},xt={class:"mt-6"},mt={class:"mt-2 flex items-center space-x-3"},yt={class:"text-gray-900 dark:text-gray-100"},vt={class:"mt-6"},ft={class:"mt-6 flex items-center justify-between"},ht={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},pt={key:0,class:"fixed bottom-0 inset-x-0 pb-safe z-40"},bt={class:"bg-white dark:bg-gray-800 shadow-lg border-t border-gray-200 dark:border-gray-700"},_t={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},kt={class:"flex items-center justify-between"},wt={class:"flex items-center space-x-4"},Ct={class:"flex items-center"},St={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},jt={class:"flex items-center"},Tt={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},It={key:0,class:"mt-4 space-y-2 max-h-60 overflow-y-auto"},Ft={class:"flex items-center"},Mt={class:"text-gray-600 dark:text-gray-400"},Ot={class:"ml-2 text-gray-900 dark:text-gray-100"},Vt={key:0,class:"ml-2 text-sm text-gray-500 dark:text-gray-400"},$t={class:"flex items-center space-x-4"},Dt={class:"text-gray-900 dark:text-gray-100"},qt=["onClick"],Bt={__name:"FoodMenu",props:{branch:{type:Object,required:!0},categories:{type:Array,required:!0},foods:{type:Object,required:!0},orderType:{type:String,required:!0,validator:d=>["delivery","collection"].includes(d)},auth:{type:Object,default:()=>({})}},setup(d){const i=d,O=g(""),U=g(!1),A=g(!1),S=g(null),j=g(!1),T=g(!1),V=g(!1),x=g(null),h=g([]),y=g(1),_=g(""),c=g([]),$=F(()=>{if(!i.branch.opening_hours)return!1;const a=new Date,t=a.toLocaleDateString("en-US",{weekday:"long"}),s=a.toLocaleTimeString("en-US",{hour12:!1}),r=i.branch.opening_hours.find(f=>f.day===t);return r?s>=r.open&&s<=r.close:!1}),D=F(()=>c.value.reduce((a,t)=>a+t.total,0).toFixed(2)),q=F(()=>{if(!x.value)return"0.00";let a=parseFloat(x.value.base_price);return h.value.forEach(t=>{const s=x.value.extra_options.find(r=>r.id===t);s&&(a+=parseFloat(s.price))}),(a*y.value).toFixed(2)}),L=a=>{let t=B(a);if(O.value){const s=O.value.toLowerCase();t=t.filter(r=>r.name.toLowerCase().includes(s)||r.description.toLowerCase().includes(s))}return U.value&&(t=t.filter(s=>s.is_vegetarian)),A.value&&(t=t.filter(s=>s.is_spicy)),t},B=a=>i.foods[a]||[],z=a=>{if(!a)return null;const t=a.startsWith("/")?a.slice(1):a;return`${window.location.origin}/storage/${t}`},J=a=>{x.value=a,h.value=[],y.value=1,_.value="",j.value=!0},E=()=>{j.value=!1,setTimeout(()=>{x.value=null,h.value=[],y.value=1,_.value=""},300)},Y=()=>{const a=x.value.extra_options.filter(s=>h.value.includes(s.id)),t={id:Date.now(),food:x.value,quantity:y.value,extras:a,specialInstructions:_.value,total:parseFloat(q.value),type:route().params.type};c.value.push(t),I(),E()},G=a=>{c.value=c.value.filter(t=>t.id!==a),I()},Q=()=>{c.value=[],sessionStorage.removeItem("foodCart")},I=()=>{const a={items:c.value,branchId:i.branch.id,orderType:i.orderType,lastUpdated:new Date().toISOString()};sessionStorage.setItem("foodCart",JSON.stringify(a))},H=a=>{S.value=a;const t=document.getElementById(`category-${a}`);t&&t.scrollIntoView({behavior:"smooth"})},P=()=>{var a;if(!((a=i.auth)!=null&&a.user)){T.value=!0;return}if(c.value.length!==0){if(D.value<i.branch.minimum_order){alert(`Minimum order amount is ৳${i.branch.minimum_order}`);return}I(),ae.visit(route("customer.checkout",{branch:i.branch.id}))}},R=()=>{const a=new IntersectionObserver(t=>{t.forEach(s=>{if(s.isIntersecting){const r=parseInt(s.target.id.replace("category-",""));S.value=r}})},{threshold:.3});i.categories.forEach(t=>{const s=document.getElementById(`category-${t.id}`);s&&a.observe(s)})};return K(()=>{i.categories.length>0&&(S.value=i.categories[0].id);const a=sessionStorage.getItem("foodCart");if(a)try{const t=JSON.parse(a);t.branchId===i.branch.id&&(c.value=t.items)}catch(t){console.error("Error loading cart:",t),sessionStorage.removeItem("foodCart")}R()}),X(c,()=>{V.value=c.value.length>0},{deep:!0}),(a,t)=>(l(),Z(re,null,{default:p(()=>[e("div",xe,[e("div",me,[e("div",ye,[e("div",ve,[e("h1",fe,o(d.branch.name),1),e("div",he,[e("span",pe,[t[5]||(t[5]=e("i",{class:"fas fa-map-marker-alt mr-2"},null,-1)),k(" "+o(d.branch.address),1)]),e("span",be,[t[6]||(t[6]=e("i",{class:"fas fa-phone mr-2"},null,-1)),k(" "+o(d.branch.contact_number),1)]),e("span",{class:M(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",$.value?"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"])},o($.value?"Open Now":"Closed"),3)])]),e("div",_e,[e("div",ke,[e("span",we,o(d.orderType==="delivery"?"Delivery":"Collection")+" Order",1),d.orderType==="delivery"?(l(),n("span",Ce,"Delivery within "+o(d.branch.delivery_radius)+"km",1)):m("",!0),e("span",Se,"Min. order: ৳"+o(d.branch.minimum_order),1)])])])]),e("div",je,[e("div",Te,[e("div",Ie,[e("aside",Fe,[e("div",Me,[t[7]||(t[7]=e("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-4"},"Menu Categories",-1)),e("nav",Oe,[(l(!0),n(C,null,w(d.categories,s=>(l(),n("button",{key:s.id,onClick:r=>H(s.id),class:M(["w-full text-left px-4 py-3 rounded-lg transition-all duration-200 flex justify-between items-center text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",{"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-300":S.value===s.id}])},[e("span",$e,o(s.name),1),e("span",De,o(B(s.id).length),1)],10,Ve))),128))])])]),e("main",qe,[(l(!0),n(C,null,w(d.categories,s=>(l(),n("section",{key:s.id,id:`category-${s.id}`,class:"scroll-mt-24 mb-8"},[e("div",Ee,[e("h2",Ne,o(s.name),1),e("p",Ue,o(s.description),1)]),e("div",Ae,[(l(!0),n(C,null,w(L(s.id),r=>{var f;return l(),n("article",{key:r.id,class:"bg-white dark:bg-gray-800 shadow-md overflow-hidden hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 rounded-b-2xl"},[e("div",Le,[r.image_path?(l(),n("img",{key:0,src:z(r.image_path),alt:r.name,class:"w-full h-full object-cover"},null,8,ze)):m("",!0),r.is_available?m("",!0):(l(),n("div",Je,t[8]||(t[8]=[e("span",{class:"text-white font-semibold text-lg"},"Currently Unavailable",-1)])))]),e("div",Ye,[e("div",Ge,[e("div",null,[e("h3",Qe,o(r.name),1),e("p",He,o(r.description),1)]),e("div",Pe,[r.is_vegetarian?(l(),n("i",Re)):m("",!0),r.is_spicy?(l(),n("i",We)):m("",!0)])]),e("div",Ke,[e("div",Xe,[t[9]||(t[9]=e("i",{class:"fas fa-clock w-5 text-indigo-500"},null,-1)),e("span",null,"Prep time: "+o(r.preparation_time)+" mins",1)]),(f=r.allergens)!=null&&f.length?(l(),n("div",Ze,[t[10]||(t[10]=e("i",{class:"fas fa-exclamation-circle w-5 text-amber-500"},null,-1)),e("span",null,"Allergens: "+o(r.allergens.join(", ")),1)])):m("",!0)]),e("div",et,[e("div",tt,[e("span",st,"৳"+o(r.base_price),1),r.original_price?(l(),n("span",at,"৳"+o(r.original_price),1)):m("",!0)]),e("button",{onClick:u=>J(r),disabled:!r.is_available,class:M(["inline-flex items-center px-5 py-2.5 rounded-lg text-sm font-medium transition-colors duration-200",[r.is_available?"bg-indigo-600 text-white hover:bg-indigo-700":"bg-gray-300 text-gray-500 cursor-not-allowed"]])},o(r.is_available?"Add to Order":"Not Available"),11,rt)])])])}),128))])],8,Be))),128))]),t[11]||(t[11]=e("aside",{class:"lg:col-span-1"},[e("div",{halides:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg sticky top-24 p-6"},[e("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-4"},"Order Summary"),e("p",{class:"text-gray-600 dark:text-gray-400"},"Your order details will appear here."),e("div",{class:"mt-4 space-y-4"},[e("div",{class:"flex justify-between text-gray-600 dark:text-gray-400"},[e("span",null,"Subtotal"),e("span",null,"৳0.00")]),e("div",{class:"flex justify-between text-gray-600 dark:text-gray-400"},[e("span",null,"Tax"),e("span",null,"৳0.00")]),e("div",{class:"flex justify-between font-bold text-gray-900 dark:text-white"},[e("span",null,"Total"),e("span",null,"৳0.00")]),e("button",{class:"w-full bg-indigo-600 text-white px-5 py-2.5 rounded-lg text-sm font-medium hover:bg-indigo-700 transition-colors duration-200"},"Proceed to Checkout")])])],-1))])])]),v(b(ie),{appear:"",show:j.value,as:"template"},{default:p(()=>[v(b(oe),{as:"div",onClose:E,class:"relative z-50"},{default:p(()=>[t[15]||(t[15]=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)),e("div",ot,[e("div",lt,[v(b(le),{class:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-gray-800 p-6 shadow-xl transition-all"},{default:p(()=>{var s,r,f;return[v(b(ne),{as:"h3",class:"text-lg font-medium text-gray-900 dark:text-gray-100"},{default:p(()=>{var u;return[k(o((u=x.value)==null?void 0:u.name),1)]}),_:1}),e("div",nt,[e("p",it,o((s=x.value)==null?void 0:s.description),1),(f=(r=x.value)==null?void 0:r.extra_options)!=null&&f.length?(l(),n("div",dt,[t[12]||(t[12]=e("h4",{class:"text-sm font-medium text-gray-900 dark:text-gray-100"},"Extra Options",-1)),e("div",ct,[(l(!0),n(C,null,w(x.value.extra_options,u=>(l(),n("label",{key:u.id,class:"flex items-center"},[N(e("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=W=>h.value=W),value:u.id,class:"form-checkbox h-4 w-4 dark:bg-gray-800 text-indigo-600 rounded border-gray-300"},null,8,ut),[[ee,h.value]]),e("span",gt,o(u.name)+" (+৳"+o(u.price)+")",1)]))),128))])])):m("",!0),e("div",xt,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-900 dark:text-gray-100"},"Quantity",-1)),e("div",mt,[e("button",{onClick:t[1]||(t[1]=u=>y.value>1&&y.value--),class:"rounded-md p-2 text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500"},[v(b(ue),{class:"h-5 w-5"})]),e("span",yt,o(y.value),1),e("button",{onClick:t[2]||(t[2]=u=>y.value++),class:"rounded-md p-2 text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500"},[v(b(ge),{class:"h-5 w-5"})])])]),e("div",vt,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-900 dark:text-gray-100"},"Special Instructions",-1)),N(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=u=>_.value=u),rows:"3",class:"mt-2 block w-full rounded-md border-gray-300 dark:bg-gray-800 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:"Any special requests?"},null,512),[[te,_.value]])])]),e("div",ft,[e("div",ht,"Total: ৳"+o(q.value),1),e("button",{onClick:Y,class:"inline-flex justify-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},"Add to Cart")])]}),_:1})])])]),_:1})]),_:1},8,["show"]),v(de,{modelValue:T.value,"onUpdate:modelValue":t[4]||(t[4]=s=>T.value=s),"redirect-path":a.currentPath},null,8,["modelValue","redirect-path"]),v(se,{"enter-active-class":"transform transition ease-out duration-300","enter-from-class":"translate-y-full","enter-to-class":"translate-y-0","leave-active-class":"transform transition ease-in duration-300","leave-from-class":"translate-y-0","leave-to-class":"translate-y-full"},{default:p(()=>[c.value.length>0?(l(),n("div",pt,[e("div",bt,[e("div",_t,[e("div",kt,[e("div",wt,[e("div",Ct,[e("span",St,o(c.value.length)+" "+o(c.value.length===1?"item":"items"),1)]),t[16]||(t[16]=e("div",{class:"h-6 w-px bg-gray-200 dark:bg-gray-700"},null,-1)),e("div",jt,[e("span",Tt,"Total: ৳"+o(D.value),1)])]),e("div",{class:"flex items-center space-x-4"},[e("button",{onClick:Q,class:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"},t[17]||(t[17]=[e("i",{class:"fas fa-trash-alt mr-2"},null,-1),k(" Clear ")])),e("button",{onClick:P,class:"inline-flex items-center px-6 py-2 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-indigo-600 hover:bg-indigo-700"},t[18]||(t[18]=[e("i",{class:"fas fa-shopping-cart mr-2"},null,-1),k(" Checkout ")]))])]),V.value?(l(),n("div",It,[(l(!0),n(C,null,w(c.value,s=>(l(),n("div",{key:s.id,class:"flex items-center justify-between py-2 border-t border-gray-200 dark:border-gray-700"},[e("div",Ft,[e("span",Mt,o(s.quantity)+"x",1),e("span",Ot,o(s.food.name),1),s.extras.length?(l(),n("span",Vt,"("+o(s.extras.map(r=>r.name).join(", "))+")",1)):m("",!0)]),e("div",$t,[e("span",Dt," ৳"+o(s.total.toFixed(2)),1),e("button",{onClick:r=>G(s.id),class:"text-red-500 hover:text-red-600"},t[19]||(t[19]=[e("i",{class:"fas fa-times"},null,-1)]),8,qt)])]))),128))])):m("",!0)])])])):m("",!0)]),_:1})])]),_:1}))}},At=ce(Bt,[["__scopeId","data-v-8b5d74cc"]]);export{At as default};
