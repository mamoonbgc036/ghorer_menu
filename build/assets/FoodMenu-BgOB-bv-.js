import{r as g,c as T,a as L,e as z,d as n,f as t,t as o,m as v,q as m,i as _,j as R,k as i,l as b,F as p,n as u,A as q,v as E,z as H}from"./app-Uxo1qTBw.js";import{C as J}from"./CustomerLayout-C4m_X95K.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Q={class:"max-w-7xl mx-auto px-4 sm:px-6"},W={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6"},G={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between"},K={class:"flex-1"},X={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},Y={class:"mt-2 flex flex-wrap items-center gap-4"},Z={class:"inline-flex items-center text-gray-600 dark:text-gray-400"},tt={class:"inline-flex items-center text-gray-600 dark:text-gray-400"},et={class:"mt-4 lg:mt-0"},st={class:"flex flex-col items-end"},lt={class:"min-h-screen bg-gray-50 dark:bg-gray-900 w-full"},at={class:"container mx-auto px-4 py-8"},ot={class:"grid grid-cols-1 lg:grid-cols-4 gap-6"},nt={class:"lg:col-span-1"},it={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg sticky top-24 p-6"},rt={class:"space-y-2"},dt=["onClick"],ct={class:"font-medium"},ut={class:"text-sm bg-indigo-50 dark:bg-indigo-900/20 px-2.5 py-1 rounded-full"},gt={class:"lg:col-span-2 rounded-2xl bg-white dark:bg-gray-900 shadow-md"},xt=["id"],pt={class:"dark:bg-gray-800 text-center rounded-t-2xl"},yt={class:"text-3xl font-bold text-gray-900 dark:text-white"},mt={class:"text-gray-600 dark:text-gray-400 leading-relaxed"},_t={class:"grid grid-cols-1 gap-6"},bt={class:"relative h-56"},ht=["src","alt"],ft={key:1,class:"absolute inset-0 bg-black bg-opacity-60 flex items-center justify-center"},vt={class:"p-6"},kt={class:"flex justify-between items-start mb-4"},wt={class:"text-xl font-semibold text-gray-900 dark:text-white"},Ct={class:"text-gray-600 dark:text-gray-400 line-clamp-2"},It={class:"flex space-x-2 items-center"},St={key:0,class:"fas fa-leaf text-green-500 text-lg",title:"Vegetarian"},Tt={key:1,class:"fas fa-pepper-hot text-red-500 text-lg",title:"Spicy"},qt={class:"space-y-2 text-sm text-gray-600 dark:text-gray-400 mb-4"},jt={class:"flex items-center gap-2"},Vt={key:0,class:"flex items-center gap-2"},Ft={class:"flex justify-between items-center border-t border-gray-200 dark:border-gray-700 pt-4"},Ut={class:"flex items-center gap-3"},$t={class:"text-xl font-bold text-gray-900 dark:text-white"},Ot={key:0,class:"text-sm text-gray-500 dark:text-gray-400 line-through"},Bt=["onClick","disabled"],Mt={class:"lg:col-span-1"},Nt={class:"relative flex"},At={class:"text-xl font-semibold text-gray-900 dark:text-white mb-2"},Dt={class:"text-sm text-gray-500 dark:text-gray-400 mb-4"},Lt=["onClick"],zt={class:"mb-4"},Rt={class:"flex gap-4"},Et={class:"flex items-center space-x-2 text-sm text-gray-700 dark:text-gray-300"},Ht=["name","onUpdate:modelValue"],Jt={class:"flex items-center space-x-2 text-sm text-gray-700 dark:text-gray-300"},Pt=["name","onUpdate:modelValue"],Qt={class:"flex items-center gap-3 mb-4"},Wt={class:"flex items-center border rounded-lg px-2 py-1 w-fit"},Gt=["onClick"],Kt={class:"px-2 text-gray-900 dark:text-white"},Xt=["onClick"],Yt={class:"mb-4"},Zt=["onUpdate:modelValue","onInput"],te={class:"flex justify-between items-center mb-4"},ee={class:"text-lg font-bold text-gray-900 dark:text-white"},se={key:0},le={class:"mt-4 p-4 bg-white dark:bg-gray-800 rounded-2xl shadow-md text-center"},ae={class:"text-xl font-bold text-indigo-600 dark:text-indigo-400 ml-2"},oe=["disabled"],ne={key:0,class:"animate-spin h-5 w-5 text-white text-center",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ie={__name:"FoodMenu",props:{branch:{type:Object,required:!0},categories:{type:Array,required:!0},foods:{type:Object,required:!0},orderType:{type:String,required:!0,validator:c=>["delivery","collection"].includes(c)},auth:{type:Object,default:()=>({})}},setup(c){var S;const y=c,h=g(!1),j=g(!1),V=g(!1),k=g(null),f=g("collection"),r=g(((S=JSON.parse(localStorage.getItem("selectedItem")))==null?void 0:S.items)??[]),F=(l,e)=>{let s=r.value.find(a=>a.id==l);s&&(s.instructions=e,x(r.value))},w=T(()=>{let l=r.value.reduce((e,s)=>e+s.total,0);return r.value.sub_total=l,l}),U=l=>{const e=r.value.filter(s=>s.id!==l);r.value=e,x(e)},x=l=>{localStorage.setItem("selectedItem",JSON.stringify({items:l,sub_total:w.value,order_type:f.value}))},$=()=>{h.value=!0,setTimeout(function(){H.visit(route("customer.checkout",{branch:y.branch.id}))},1e3)},O=l=>{if(r.value.some(s=>s.id===l.id)){const s=r.value.find(a=>a.id===l.id);s.qty+=1,s.total=s.qty*parseInt(s.base_price)}else{const s={...l,qty:1,total:parseInt(l.base_price),portion:"full",instructions:""};r.value.push(s)}x(r.value)},B=l=>{const e=r.value.find(s=>s.id==l);e.qty++,e.total=e.qty*parseInt(e.base_price),x(r.value)},M=l=>{const e=r.value.find(s=>s.id==l);e.qty>1&&(e.qty--,e.total=e.qty*parseInt(e.base_price)),x(r.value)},C=T(()=>{if(!y.branch.opening_hours)return!1;const l=new Date,e=l.toLocaleDateString("en-US",{weekday:"long"}),s=l.toLocaleTimeString("en-US",{hour12:!1}),a=y.branch.opening_hours.find(d=>d.day===e);return a?s>=a.open&&s<=a.close:!1}),N=l=>{let e=I(l);return j.value&&(e=e.filter(s=>s.is_vegetarian)),V.value&&(e=e.filter(s=>s.is_spicy)),e},I=l=>y.foods[l]||[],A=l=>{if(!l)return null;const e=l.startsWith("/")?l.slice(1):l;return`${window.location.origin}/storage/${e}`},D=l=>{k.value=l;const e=document.getElementById(`category-${l}`);e&&e.scrollIntoView({behavior:"smooth"})};return(l,e)=>(n(),L(J,null,{default:z(()=>[t("div",Q,[t("div",W,[t("div",G,[t("div",K,[t("h1",X,o(c.branch.name),1),t("div",Y,[t("span",Z,[e[1]||(e[1]=t("i",{class:"fas fa-map-marker-alt mr-2"},null,-1)),v(" "+o(c.branch.address),1)]),t("span",tt,[e[2]||(e[2]=t("i",{class:"fas fa-phone mr-2"},null,-1)),v(" "+o(c.branch.contact_number),1)]),t("span",{class:m(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",C.value?"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"])},o(C.value?"Open Now":"Closed"),3)])]),t("div",et,[t("div",st,[e[4]||(e[4]=t("label",{for:"orderType",class:"mb-1 text-sm text-gray-700 dark:text-gray-300 font-medium"},"Order Type",-1)),_(t("select",{id:"orderType","onUpdate:modelValue":e[0]||(e[0]=s=>f.value=s),class:"w-48 px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500"},e[3]||(e[3]=[t("option",{value:"delivery"},"Delivery",-1),t("option",{value:"collection"},"Collection",-1)]),512),[[R,f.value]])])])])]),t("div",lt,[t("div",at,[t("div",ot,[t("aside",nt,[t("div",it,[e[5]||(e[5]=t("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-4"},"Menu Categories",-1)),t("nav",rt,[(n(!0),i(p,null,b(c.categories,s=>(n(),i("button",{key:s.id,onClick:a=>D(s.id),class:m(["w-full text-left px-4 py-3 rounded-lg transition-all duration-200 flex justify-between items-center text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",{"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-300":k.value===s.id}])},[t("span",ct,o(s.name),1),t("span",ut,o(I(s.id).length),1)],10,dt))),128))])])]),t("main",gt,[(n(!0),i(p,null,b(c.categories,s=>(n(),i("section",{key:s.id,id:`category-${s.id}`,class:"scroll-mt-24 mb-8"},[t("div",pt,[t("h2",yt,o(s.name),1),t("p",mt,o(s.description),1)]),t("div",_t,[(n(!0),i(p,null,b(N(s.id),a=>{var d;return n(),i("article",{key:a.id,class:"bg-white dark:bg-gray-800 shadow-md overflow-hidden hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 rounded-b-2xl"},[t("div",bt,[a.image_path?(n(),i("img",{key:0,src:A(a.image_path),alt:a.name,class:"w-full h-full object-cover"},null,8,ht)):u("",!0),a.is_available?u("",!0):(n(),i("div",ft,e[6]||(e[6]=[t("span",{class:"text-white font-semibold text-lg"},"Currently Unavailable",-1)])))]),t("div",vt,[t("div",kt,[t("div",null,[t("h3",wt,o(a.name),1),t("p",Ct,o(a.description),1)]),t("div",It,[a.is_vegetarian?(n(),i("i",St)):u("",!0),a.is_spicy?(n(),i("i",Tt)):u("",!0)])]),t("div",qt,[t("div",jt,[e[7]||(e[7]=t("i",{class:"fas fa-clock w-5 text-indigo-500"},null,-1)),t("span",null,"Prep time: "+o(a.preparation_time)+" mins",1)]),(d=a.allergens)!=null&&d.length?(n(),i("div",Vt,[e[8]||(e[8]=t("i",{class:"fas fa-exclamation-circle w-5 text-amber-500"},null,-1)),t("span",null,"Allergens: "+o(a.allergens.join(", ")),1)])):u("",!0)]),t("div",Ft,[t("div",Ut,[t("span",$t,"৳"+o(a.base_price),1),a.original_price?(n(),i("span",Ot,"৳"+o(a.original_price),1)):u("",!0)]),t("button",{onClick:re=>O(a),disabled:!a.is_available,class:m(["inline-flex items-center px-5 py-2.5 rounded-lg text-sm font-medium transition-colors duration-200",[a.is_available?"bg-indigo-600 text-white hover:bg-indigo-700":"bg-gray-300 text-gray-500 cursor-not-allowed"]])},o(a.is_available?"Add to Order":"Not Available"),11,Bt)])])])}),128))])],8,xt))),128))]),t("div",Mt,[(n(!0),i(p,null,b(r.value,(s,a)=>(n(),i("div",{key:a,class:m(["bg-white dark:bg-gray-800 rounded-2xl shadow-lg top-24 p-6",a>0?"mt-2":""])},[t("div",Nt,[t("div",null,[t("h2",At,o(s.name),1),t("p",Dt,o(s.description),1)]),t("button",{onClick:d=>U(s.id),class:"absolute top-0 right-0 text-2xl text-white bg-red-600 hover:bg-red-700 rounded-full w-7 h-7 flex items-center justify-center shadow-lg",title:"Remove"},"×",8,Lt)]),t("div",zt,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Select Portion",-1)),t("div",Rt,[t("label",Et,[_(t("input",{type:"radio",name:`portion-${s.id}`,value:"full",class:"form-radio text-indigo-600","onUpdate:modelValue":d=>s.portion=d},null,8,Ht),[[q,s.portion]]),e[9]||(e[9]=t("span",null,"Full",-1))]),t("label",Jt,[_(t("input",{type:"radio",name:`portion-${s.id}`,value:"half",class:"form-radio text-indigo-600","onUpdate:modelValue":d=>s.portion=d},null,8,Pt),[[q,s.portion]]),e[10]||(e[10]=t("span",null,"Half",-1))])])]),t("div",Qt,[e[12]||(e[12]=t("span",{class:"text-sm text-gray-600 dark:text-gray-300"},"Quantity",-1)),t("div",Wt,[t("button",{onClick:d=>M(s.id),class:"text-indigo-600 text-xl font-bold px-2"},"−",8,Gt),t("span",Kt,o(s==null?void 0:s.qty),1),t("button",{onClick:d=>B(s.id),class:"text-indigo-600 text-xl font-bold px-2"},"+",8,Xt)])]),t("div",Yt,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Special Instructions",-1)),_(t("textarea",{"onUpdate:modelValue":d=>s.instructions=d,onInput:d=>F(s.id,d.target.value),rows:"2",class:"w-full border rounded-lg p-2 text-sm text-gray-800 dark:text-gray-100 dark:bg-gray-700",placeholder:"Any special requests?"},null,40,Zt),[[E,s.instructions]])]),t("div",te,[e[14]||(e[14]=t("span",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Total:",-1)),t("span",ee,"৳ "+o(s.total),1)])],2))),128)),r.value.length>0?(n(),i("div",se,[t("div",le,[e[15]||(e[15]=t("span",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300"},"Sub Total:",-1)),t("span",ae,"৳ "+o(w.value),1)]),t("button",{onClick:$,disabled:h.value,class:"w-full text-lg bg-indigo-600 text-white hover:bg-indigo-700 text-center px-5 py-2.5 rounded-lg transition-colors duration-200 flex justify-center items-center mt-2"},[h.value?(n(),i("svg",ne,e[16]||(e[16]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"},null,-1)]))):(n(),i(p,{key:1},[v("Proceed To Checkout")],64))],8,oe)])):u("",!0)])])])])])]),_:1}))}},ge=P(ie,[["__scopeId","data-v-c208200b"]]);export{ge as default};
