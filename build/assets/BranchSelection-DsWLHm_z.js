import"./_baseGetTag-CgJ4GK5P.js";import{p as v,x as p,a as D,e as f,d,f as e,i as h,j as L,v as B,k as c,F as u,l as y,t as o,n as b,h as k,q as C,m as l,H as O}from"./app-Uxo1qTBw.js";import{C as T}from"./CustomerLayout-C4m_X95K.js";import{A as S}from"./aos-DqbVZq-C.js";import{d as x,u as A,t as N}from"./timezone-DsV292TO.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";x.extend(A);x.extend(N);const U={name:"BranchLocator",components:{CustomerLayout:T,Link:v},props:{branches:{type:Array,required:!0},locals:{type:Array,required:!0}},data(){return{searchQuery:"",showDropDown:!1,showOpenOnly:!1,deliveryOnly:!1,filteredBranches:[],filterLocal:[],sortOrder:"distance"}},mounted(){S.init({duration:700}),this.filterLocal=this.locals,this.filteredBranches=this.branches},methods:{formatTime(r){return x(`1970-01-01 ${r}`).tz("Asia/Dhaka").format("hh:mm A")},check(){this.showDropDown=!0,this.filteredBranches=this.branches;const r=this.searchQuery.toLowerCase();this.filterLocal=this.locals.filter(t=>t.name.toLowerCase().includes(r))},selectedArea(r){this.searchQuery=r.name,this.showDropDown=!1,console.log(r.division_id),r.division_id<=0?(console.log(r),this.filteredBranches=this.branches.filter(t=>t.local_id===r.own_id)):this.filteredBranches=this.branches.filter(t=>t.thana_id===r.id)},isOpen(r){if(!r)return!1;const t=new Date,g=t.toLocaleDateString("en-US",{weekday:"long"}),m=t.toLocaleTimeString("en-US",{hour12:!1}),i=r.find(a=>a.day===g);return i?m>=i.open&&m<=i.close:!1},isDeliveryAvailable(r){return!r.distance||!r.delivery_radius?!0:r.distance<=r.delivery_radius},formatDistance(r){return r?`${r.toFixed(1)} km away`:"Distance unknown"},getDirectionsUrl(r){return`https://www.google.com/maps/dir/?api=1&destination=${`${r.latitude},${r.longitude}`}`}}},Q={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},V={class:"flex flex-col md:flex-row md:items-center md:justify-between mb-8"},q={class:"mt-4 md:mt-0 flex items-center space-x-4"},z={class:"flex items-center space-x-2"},F={class:"mb-8 bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4"},H={class:"max-w-3xl mx-auto"},I={class:"relative"},M={key:0,class:"mt-2 absolute w-full text-center bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg shadow-md z-10"},E=["onClick"],G={class:"p-4 border-b border-gray-200 dark:border-gray-700"},P={class:"flex justify-between items-start"},Y={class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},J={class:"mt-2 text-sm text-gray-500 dark:text-gray-400 not-italic"},K={class:"p-4 space-y-4"},R={class:"flex items-center justify-between text-sm"},W={class:"inline-flex items-center text-gray-500 dark:text-gray-400"},X={class:"inline-flex items-center text-gray-500 dark:text-gray-400"},Z={class:"text-sm text-gray-500 dark:text-gray-400"},$={class:"space-y-2"},ee={class:"max-h-64 overflow-y-auto scrollbar-thin"},te={class:"w-full text-sm text-left"},re={class:"py-2 pr-4"},se={class:"py-2"},ae={class:"py-2"},oe={class:"py-2"},ie={class:"flex flex-wrap gap-3 pt-4 border-t border-gray-200 dark:border-gray-700"},ne=["href"],de={key:0,class:"text-center py-12 bg-white dark:bg-gray-800 rounded-lg shadow-sm"};function le(r,t,g,m,i,a){const _=p("Link"),w=p("CustomerLayout");return d(),D(w,null,{default:f(()=>[e("div",Q,[e("div",V,[e("div",q,[e("div",z,[h(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>i.sortOrder=s),class:"form-select rounded-md border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 text-sm focus:ring-indigo-500 focus:border-indigo-500"},t[3]||(t[3]=[e("option",{value:"distance"},"Sort by Distance",-1),e("option",{value:"name"},"Sort by Name",-1)]),512),[[L,i.sortOrder]])])])]),e("div",F,[e("div",H,[e("div",I,[h(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=s=>i.searchQuery=s),onInput:t[2]||(t[2]=(...s)=>a.check&&a.check(...s)),placeholder:"Type Your Place",class:"w-full py-3 px-4 text-center rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-700 dark:text-gray-300 focus:ring-2 focus:ring-indigo-500"},null,544),[[B,i.searchQuery]]),i.searchQuery.length>0&&i.showDropDown?(d(),c("ul",M,[(d(!0),c(u,null,y(i.filterLocal,(s,n)=>(d(),c("li",{key:n,onClick:ce=>a.selectedArea(s),class:"text-gray-700 cursor-pointer dark:text-gray-300 px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"},o(s.name),9,E))),128))])):b("",!0)])])]),k(O,{name:"list",tag:"div",class:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3"},{default:f(()=>[(d(!0),c(u,null,y(i.filteredBranches,s=>(d(),c("div",{key:s.id,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm hover:shadow-md transition-all duration-300 border border-gray-200 dark:border-gray-700","data-aos":"fade-up"},[e("div",G,[e("div",P,[e("h3",Y,o(s.name),1),e("span",{class:C(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",a.isOpen(s.opening_hours)?"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"])},o(a.isOpen(s.opening_hours)?"Open Now":"Closed"),3)]),e("address",J,o(s.address),1)]),e("div",K,[e("div",R,[e("span",W,[t[4]||(t[4]=e("i",{class:"fas fa-map-marker-alt text-indigo-500 mr-2"},null,-1)),l(" "+o(a.formatDistance(s.distance)),1)]),e("span",X,[t[5]||(t[5]=e("i",{class:"fas fa-truck text-indigo-500 mr-2"},null,-1)),l(" Up to "+o(s.delivery_radius)+"km ",1)])]),e("div",Z,[t[6]||(t[6]=e("i",{class:"fas fa-phone text-indigo-500 mr-2"},null,-1)),l(" "+o(s.contact_number),1)]),e("div",$,[t[8]||(t[8]=e("h4",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Opening Hours",-1)),e("div",ee,[e("table",te,[t[7]||(t[7]=e("thead",{class:"text-gray-700 dark:text-gray-300 border-b border-gray-300 dark:border-gray-600"},[e("tr",null,[e("th",{class:"py-2 px-4 text-left"},[e("i",{class:"fas fa-calendar-day mr-1 text-blue-500"}),l(" Day ")]),e("th",{class:"py-2 px-4 text-center"},[e("i",{class:"fas fa-coffee mr-1 text-yellow-500"}),l(" Breakfast ")]),e("th",{class:"py-2 px-4 text-center"},[e("i",{class:"fas fa-utensils mr-1 text-blue-600"}),l(" Lunch ")]),e("th",{class:"py-2 px-4 text-center"},[e("i",{class:"fas fa-moon mr-1 text-purple-500"}),l(" Dinner ")])])],-1)),e("tbody",null,[(d(!0),c(u,null,y(s.opening_hours,n=>(d(),c("tr",{key:n.day,class:"text-gray-500 dark:text-gray-400"},[e("td",re,o(n.day),1),e("td",se,o(a.formatTime(n.breakfast.start))+" - "+o(a.formatTime(n.breakfast.end)),1),e("td",ae,o(a.formatTime(n.lunch.start))+" - "+o(a.formatTime(n.lunch.end)),1),e("td",oe,o(a.formatTime(n.dinner.start))+" - "+o(a.formatTime(n.dinner.end)),1)]))),128))])])])]),e("div",ie,[k(_,{href:r.route("customer.branch.menu",{branch:s.id,type:"collection"}),class:"flex-1 inline-flex items-center justify-center px-4 py-2 border border-indigo-600 text-sm font-medium rounded-md text-indigo-600 bg-white hover:bg-indigo-50 focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-800"},{default:f(()=>t[9]||(t[9]=[e("i",{class:"fas fa-shopping-bag mr-2"},null,-1),l(" Order Now ")])),_:2},1032,["href"]),e("a",{href:a.getDirectionsUrl(s),target:"_blank",rel:"noopener noreferrer",class:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-800"},t[10]||(t[10]=[e("i",{class:"fas fa-directions mr-2"},null,-1),l(" Directions ")]),8,ne)])])]))),128))]),_:1}),g.branches.length===0?(d(),c("div",de,t[11]||(t[11]=[e("i",{class:"fas fa-store-slash text-4xl text-gray-400 mb-4"},null,-1),e("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"},"No branches found",-1),e("p",{class:"mt-2 text-gray-500 dark:text-gray-400"},"Try adjusting your search criteria",-1)]))):b("",!0)])]),_:1})}const pe=j(U,[["render",le],["__scopeId","data-v-1ae640de"]]);export{pe as default};
