import{r as B,c as H,T as Z,w as ee,o as ae,a as z,b as te,d as m,e as _,f as a,t as p,g as le,h as r,u as s,i as h,v as re,j as $,k as g,l as x,F as V,m as w,n as se,p as de}from"./app-DBtr3_Li.js";import{_ as ne}from"./AdminLayout-Bd-DyGmI.js";import{_ as u,a as c,b as y}from"./InputError-CLFjs1GI.js";import{T as oe,_ as ie}from"./Toggle-qYyUtabN.js";import{P as ue}from"./PrimaryButton-DF8eVCvv.js";import{_ as me}from"./SecondaryButton-CEU7rnjb.js";import{D as ge}from"./DangerButton-Bmb8NJ8i.js";import{_ as ce}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ye={class:"text-xl text-center font-semibold leading-tight text-gray-800 dark:text-gray-200"},pe={class:"py-12"},be={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},fe={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},ve={class:"bg-gray-50 dark:bg-gray-700 p-6 rounded-lg"},ke={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},_e={class:"md:col-span-2"},he={class:"bg-gray-50 dark:bg-gray-700 p-6 rounded-lg"},xe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ve={class:"md:col-span-2"},we={class:"mt-1 flex items-center space-x-4"},Ue={class:"text-sm text-gray-600 dark:text-gray-300 w-12"},$e={class:"bg-gray-50 dark:bg-gray-700 p-6 rounded-lg"},Ce={class:"grid grid-cols-1 sm:grid-cols-3 gap-6"},Ae=["value"],Te=["value"],Be=["value"],De={class:"bg-gray-50 dark:bg-gray-700 p-6 rounded-lg"},qe={class:"space-y-6"},Ie={class:"flex items-start space-x-4"},Se={class:"w-32"},Le=["id","onUpdate:modelValue"],Me=["value"],je=["onClick"],Fe={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ne={class:"flex gap-2"},Oe={class:"flex gap-2"},Re={class:"flex gap-2"},Ee={class:"mt-2 flex items-center"},Pe=["src"],He=["src"],ze={key:2,class:"h-32 w-32 rounded-lg bg-gray-200 dark:bg-gray-700 flex items-center justify-center"},We={class:"bg-gray-50 dark:bg-gray-700 p-6 rounded-lg"},Ge={class:"flex items-center justify-between"},Je={class:"flex items-center justify-end space-x-3"},Ke={__name:"Form",props:{branch:{type:Object,default:null},cities:{type:Array,default:()=>[]},locals:{type:Array,default:()=>[]}},setup(b){var q,I,S,L,M,j,F,N,O,R,E,P;const C=B(null),v=B(null),i=b,k=B([]),D=H(()=>i.branch?"Edit Restaurant":"Create Restaurant"),A=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],W=n=>{const e=n.target.files[0];if(e){l.image=e;const f=new FileReader;f.onload=U=>{v.value=U.target.result},f.readAsDataURL(e)}},G=()=>{l.image=null,v.value=null,C.value&&(C.value.value="")},J=n=>!n||!Array.isArray(n)?[{day:"Monday",open:"09:00",close:"22:00",breakfast:{start:"08:00",end:"10:00"},lunch:{start:"12:00",end:"15:00"},dinner:{start:"18:00",end:"22:00"}}]:n.map(e=>({day:e.day||"Monday",open:e.open||"09:00",close:e.close||"22:00",breakfast:e.breakfast||{start:"08:00",end:"10:00"},lunch:e.lunch||{start:"12:00",end:"15:00"},dinner:e.dinner||{start:"18:00",end:"22:00"}})),l=Z({name:((q=i.branch)==null?void 0:q.name)??"",address:((I=i.branch)==null?void 0:I.address)??"",latitude:((S=i.branch)==null?void 0:S.latitude)??"",longitude:((L=i.branch)==null?void 0:L.longitude)??"",contact_number:((M=i.branch)==null?void 0:M.contact_number)??"",district_id:((j=i.branch)==null?void 0:j.district_id)??"",thana_id:((F=i.branch)==null?void 0:F.thana_id)??"",local_id:((N=i.branch)==null?void 0:N.local_id)??"",image:((O=i.branch)==null?void 0:O.image)??"",opening_hours:J((R=i.branch)==null?void 0:R.opening_hours),delivery_radius:((E=i.branch)==null?void 0:E.delivery_radius)??5,is_active:((P=i.branch)==null?void 0:P.is_active)??!0}),K=()=>{const n=A.find(e=>!l.opening_hours.some(f=>f.day===e))||A[0];l.opening_hours.push({day:n,open:"09:00",close:"22:00",breakfast:{start:"08:00",end:"10:00"},lunch:{start:"12:00",end:"15:00"},dinner:{start:"18:00",end:"22:00"}})},Q=H(()=>l.thana_id?i.locals.filter(n=>n.area_id==l.thana_id):[]),X=n=>{l.opening_hours.length>1&&l.opening_hours.splice(n,1)},T=async()=>{if(!l.district_id){k.value=[],l.thana_id="";return}try{const n=await te.get(`/admin/area/${l.district_id}`);k.value=n.data,k.value.some(e=>e.id===l.thana_id)||(l.thana_id="")}catch(n){console.error("Error fetching areas:",n),k.value=[]}};ee(()=>l.district_id,()=>{T()}),ae(()=>{l.district_id&&T()});const Y=()=>{i.branch?l.put(route("admin.branches.update",i.branch.id)):l.post(route("admin.branches.store"))};return(n,e)=>(m(),z(ne,{title:D.value},{default:_(()=>{var f,U;return[a("h2",ye,p(D.value),1),a("div",pe,[a("div",be,[a("div",fe,[a("form",{onSubmit:le(Y,["prevent"]),class:"p-6 space-y-6"},[a("section",ve,[e[11]||(e[11]=a("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4"},"Basic Information",-1)),a("div",ke,[a("div",null,[r(u,{for:"name",value:"Branch Name"}),r(c,{id:"name",modelValue:s(l).name,"onUpdate:modelValue":e[0]||(e[0]=t=>s(l).name=t),type:"text",class:"mt-1 block w-full dark:bg-gray-900 dark:text-gray-300",required:""},null,8,["modelValue"]),r(y,{message:s(l).errors.name,class:"mt-2"},null,8,["message"])]),a("div",null,[r(u,{for:"contact_number",value:"Contact Number"}),r(c,{id:"contact_number",modelValue:s(l).contact_number,"onUpdate:modelValue":e[1]||(e[1]=t=>s(l).contact_number=t),type:"text",class:"mt-1 block w-full dark:bg-gray-900 dark:text-gray-300",required:""},null,8,["modelValue"]),r(y,{message:s(l).errors.contact_number,class:"mt-2"},null,8,["message"])]),a("div",_e,[r(u,{for:"address",value:"Address"}),r(oe,{id:"address",modelValue:s(l).address,"onUpdate:modelValue":e[2]||(e[2]=t=>s(l).address=t),class:"mt-1 block w-full dark:bg-gray-900 dark:text-gray-300",rows:"2",required:""},null,8,["modelValue"]),r(y,{message:s(l).errors.address,class:"mt-2"},null,8,["message"])])])]),a("section",he,[e[12]||(e[12]=a("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4"}," Location & Delivery Area ",-1)),a("div",xe,[a("div",null,[r(u,{for:"latitude",value:"Latitude"}),r(c,{id:"latitude",modelValue:s(l).latitude,"onUpdate:modelValue":e[3]||(e[3]=t=>s(l).latitude=t),type:"number",step:"any",class:"mt-1 block w-full dark:bg-gray-900 dark:text-gray-300",required:""},null,8,["modelValue"]),r(y,{message:s(l).errors.latitude,class:"mt-2"},null,8,["message"])]),a("div",null,[r(u,{for:"longitude",value:"Longitude"}),r(c,{id:"longitude",modelValue:s(l).longitude,"onUpdate:modelValue":e[4]||(e[4]=t=>s(l).longitude=t),type:"number",step:"any",class:"mt-1 block w-full dark:bg-gray-900 dark:text-gray-300",required:""},null,8,["modelValue"]),r(y,{message:s(l).errors.longitude,class:"mt-2"},null,8,["message"])]),a("div",Ve,[r(u,{for:"delivery_radius",value:"Delivery Radius (km)"}),a("div",we,[h(a("input",{type:"range",id:"delivery_radius","onUpdate:modelValue":e[5]||(e[5]=t=>s(l).delivery_radius=t),min:"1",max:"50",class:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer"},null,512),[[re,s(l).delivery_radius]]),a("span",Ue,p(s(l).delivery_radius)+"km ",1)]),r(y,{message:s(l).errors.delivery_radius,class:"mt-2"},null,8,["message"])])])]),a("section",$e,[e[16]||(e[16]=a("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4"},"Address",-1)),a("div",Ce,[a("div",null,[r(u,{for:"city_id",value:"City"}),h(a("select",{id:"city_id","onUpdate:modelValue":e[6]||(e[6]=t=>s(l).district_id=t),onChange:T,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm dark:bg-gray-900 dark:text-gray-300",required:""},[e[13]||(e[13]=a("option",{value:""},"Select a city",-1)),(m(!0),g(V,null,x(b.cities,t=>(m(),g("option",{key:t.id,value:t.id},p(t.name),9,Ae))),128))],544),[[$,s(l).district_id]]),r(y,{message:s(l).errors.district_id,class:"mt-2"},null,8,["message"])]),a("div",null,[r(u,{for:"thana_id",value:"Area"}),h(a("select",{id:"thana_id","onUpdate:modelValue":e[7]||(e[7]=t=>s(l).thana_id=t),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm dark:bg-gray-900 dark:text-gray-300",required:""},[e[14]||(e[14]=a("option",{value:""},"Select an Area",-1)),(m(!0),g(V,null,x(k.value,t=>(m(),g("option",{key:t.id,value:t.id},p(t.name),9,Te))),128))],512),[[$,s(l).thana_id]]),r(y,{message:s(l).errors.thana_id,class:"mt-2"},null,8,["message"])]),a("div",null,[r(u,{for:"local_id",value:"Local"}),h(a("select",{id:"local_id","onUpdate:modelValue":e[8]||(e[8]=t=>s(l).local_id=t),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm dark:bg-gray-900 dark:text-gray-300"},[e[15]||(e[15]=a("option",{value:""},"Select a Local Area",-1)),(m(!0),g(V,null,x(Q.value,t=>(m(),g("option",{key:t.id,value:t.id},p(t.name),9,Be))),128))],512),[[$,s(l).local_id]]),r(y,{message:s(l).errors.local_id,class:"mt-2"},null,8,["message"])])])]),a("section",De,[e[19]||(e[19]=a("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4"}," Opening Hours & Meal Times ",-1)),a("div",qe,[(m(!0),g(V,null,x(s(l).opening_hours,(t,o)=>(m(),g("div",{key:o,class:"space-y-4 border p-4 rounded-lg dark:border-gray-600"},[a("div",Ie,[a("div",Se,[r(u,{for:`day-${o}`,value:"Day"},null,8,["for"]),h(a("select",{id:`day-${o}`,"onUpdate:modelValue":d=>t.day=d,class:"mt-1 block w-full dark:bg-gray-900 dark:text-gray-300",required:""},[(m(),g(V,null,x(A,d=>a("option",{key:d,value:d},p(d),9,Me)),64))],8,Le),[[$,t.day]])]),a("div",null,[r(u,{for:`open-${o}`,value:"Opening Time"},null,8,["for"]),r(c,{id:`open-${o}`,modelValue:t.open,"onUpdate:modelValue":d=>t.open=d,type:"time",class:"mt-1 block w-full dark:bg-gray-900 dark:text-gray-300",required:""},null,8,["id","modelValue","onUpdate:modelValue"])]),a("div",null,[r(u,{for:`close-${o}`,value:"Closing Time"},null,8,["for"]),r(c,{id:`close-${o}`,modelValue:t.close,"onUpdate:modelValue":d=>t.close=d,type:"time",class:"mt-1 block w-full dark:bg-gray-900 dark:text-gray-300",required:""},null,8,["id","modelValue","onUpdate:modelValue"])]),a("button",{type:"button",onClick:d=>X(o),class:"mt-7 text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300"},e[17]||(e[17]=[a("i",{class:"fas fa-trash"},null,-1)]),8,je)]),a("div",Fe,[a("div",null,[r(u,{for:`breakfast-${o}`,value:"Breakfast Time"},null,8,["for"]),a("div",Ne,[r(c,{id:`breakfast-start-${o}`,modelValue:t.breakfast.start,"onUpdate:modelValue":d=>t.breakfast.start=d,type:"time",class:"mt-1 w-1/2 dark:bg-gray-900 dark:text-gray-300"},null,8,["id","modelValue","onUpdate:modelValue"]),r(c,{id:`breakfast-end-${o}`,modelValue:t.breakfast.end,"onUpdate:modelValue":d=>t.breakfast.end=d,type:"time",class:"mt-1 w-1/2 dark:bg-gray-900 dark:text-gray-300"},null,8,["id","modelValue","onUpdate:modelValue"])])]),a("div",null,[r(u,{for:`lunch-${o}`,value:"Lunch Time"},null,8,["for"]),a("div",Oe,[r(c,{id:`lunch-start-${o}`,modelValue:t.lunch.start,"onUpdate:modelValue":d=>t.lunch.start=d,type:"time",class:"mt-1 w-1/2 dark:bg-gray-900 dark:text-gray-300"},null,8,["id","modelValue","onUpdate:modelValue"]),r(c,{id:`lunch-end-${o}`,modelValue:t.lunch.end,"onUpdate:modelValue":d=>t.lunch.end=d,type:"time",class:"mt-1 w-1/2 dark:bg-gray-900 dark:text-gray-300"},null,8,["id","modelValue","onUpdate:modelValue"])])]),a("div",null,[r(u,{for:`dinner-${o}`,value:"Dinner Time"},null,8,["for"]),a("div",Re,[r(c,{id:`dinner-start-${o}`,modelValue:t.dinner.start,"onUpdate:modelValue":d=>t.dinner.start=d,type:"time",class:"mt-1 w-1/2 dark:bg-gray-900 dark:text-gray-300"},null,8,["id","modelValue","onUpdate:modelValue"]),r(c,{id:`dinner-end-${o}`,modelValue:t.dinner.end,"onUpdate:modelValue":d=>t.dinner.end=d,type:"time",class:"mt-1 w-1/2 dark:bg-gray-900 dark:text-gray-300"},null,8,["id","modelValue","onUpdate:modelValue"])])])])]))),128)),a("button",{type:"button",onClick:K,class:"mt-2 inline-flex items-center px-4 py-2 bg-gray-800 dark:bg-gray-200 border border-transparent rounded-md font-semibold text-xs text-white dark:text-gray-800 uppercase tracking-widest hover:bg-gray-700 dark:hover:bg-white focus:bg-gray-700 dark:focus:bg-white active:bg-gray-900 dark:active:bg-gray-300 transition ease-in-out duration-150"},e[18]||(e[18]=[a("i",{class:"fas fa-plus mr-2"},null,-1),w(" Add Day ")])),r(y,{message:s(l).errors.opening_hours,class:"mt-2"},null,8,["message"])])]),a("div",null,[r(u,{for:"image",value:"Image"}),a("div",Ee,[v.value?(m(),g("img",{key:0,src:v.value,class:"h-32 w-32 object-cover rounded-lg"},null,8,Pe)):(f=b.branch)!=null&&f.image_path?(m(),g("img",{key:1,src:`/storage/${b.branch.image_path}`,class:"h-32 w-32 object-cover rounded-lg"},null,8,He)):(m(),g("div",ze,e[20]||(e[20]=[a("i",{class:"fas fa-camera text-gray-400 dark:text-gray-500 text-3xl"},null,-1)]))),a("input",{type:"file",id:"image",ref_key:"imageInput",ref:C,class:"hidden",onChange:W,accept:"image/*"},null,544),r(me,{type:"button",class:"ml-4",onClick:e[9]||(e[9]=t=>n.$refs.imageInput.click())},{default:_(()=>{var t;return[w(p(v.value||(t=b.branch)!=null&&t.image_path?"Change Image":"Select Image"),1)]}),_:1}),v.value||(U=b.branch)!=null&&U.image_path?(m(),z(ge,{key:3,type:"button",class:"ml-2",onClick:G},{default:_(()=>e[21]||(e[21]=[w("Remove")])),_:1})):se("",!0)]),r(y,{message:s(l).errors.image,class:"mt-2"},null,8,["message"])]),a("section",We,[a("div",Ge,[e[22]||(e[22]=a("div",null,[a("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"},"Branch Status"),a("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Enable or disable this branch")],-1)),r(ie,{modelValue:s(l).is_active,"onUpdate:modelValue":e[10]||(e[10]=t=>s(l).is_active=t),class:"ml-4"},null,8,["modelValue"])])]),a("div",Je,[r(s(de),{href:n.route("admin.branches.index"),class:"inline-flex items-center px-4 py-2 bg-gray-200 dark:bg-gray-700 border border-transparent rounded-md font-semibold text-xs text-gray-700 dark:text-gray-300 uppercase tracking-widest hover:bg-gray-300 dark:hover:bg-gray-600 focus:bg-gray-300 dark:focus:bg-gray-600 active:bg-gray-300 dark:active:bg-gray-600"},{default:_(()=>e[23]||(e[23]=[w("Cancel")])),_:1},8,["href"]),r(ue,{disabled:s(l).processing},{default:_(()=>[w(p(b.branch?"Update Branch":"Create Branch"),1)]),_:1},8,["disabled"])])],32)])])])]}),_:1},8,["title"]))}},ra=ce(Ke,[["__scopeId","data-v-153e68e7"]]);export{ra as default};
