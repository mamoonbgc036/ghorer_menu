import{r as u,d,k as c,f as a,t as S,q as _,g as V,n as b,Y as C,V as B,h as o,u as w,m as v,e as h,i as P,B as U,J as F,p as $,z}from"./app-DBtr3_Li.js";import{a as I,b as x,_ as y}from"./InputError-CLFjs1GI.js";import{P as D}from"./PrimaryButton-DF8eVCvv.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const E=["src"],N={__name:"ImageUpload",props:{listingImage:String},emits:["image"],setup(f,{emit:i}){const e=i,r=f,p=r.listingImage?`/storage/${r.listingImage}`:null,n=u(p),l=u(!1),s=u(!1),t=g=>{n.value=URL.createObjectURL(g.target.files[0]),l.value=g.target.files[0].size>3145728,s.value=!0,e("image",g.target.files[0])},m=()=>{s.value=!1,n.value=p,l.value=!1,e("image",null)};return(g,k)=>(d(),c("div",null,[a("span",{class:_(["block text-sm font-medium text-slate-700 dark:text-slate-300",{"!text-red-500":l.value}])},S(l.value?"The selected image exceeds 3Mb":"Image (Max size 3Mb)"),3),a("label",{for:"image",class:_(["block rounded-md mt-1 bg-slate-300 h-[140px] overflow-hidden cursor-pointer border-slate-300 border relative",{"!border-red-500":l.value}])},[a("img",{src:n.value??"/storage/images/img-upload.jpg",class:"object-cover object-center h-full w-full",alt:""},null,8,E),s.value?(d(),c("button",{key:0,class:"absolute top-2 right-2 bg-white/75 w-8 h-8 rounded-full grid place-items-center text-slate-700",onClick:V(m,["prevent"]),type:"button"},k[0]||(k[0]=[a("i",{class:"fa-solid fa-rotate-left"},null,-1)]))):b("",!0)],2),a("input",{onInput:t,type:"file",name:"image",id:"image",hidden:""},null,32)]))}},j={key:0},M={class:"mt-2 text-sm text-gray-800 dark:text-gray-200"},T={class:"mt-2 text-sm font-medium text-green-600 dark:text-green-400"},q={class:"flex items-center gap-4"},R={key:0,class:"text-sm text-gray-600 dark:text-gray-400"},J={__name:"UpdateProfileInformationForm",props:{mustVerifyEmail:Boolean,status:String},setup(f){const i=C().props.auth.user,e=B({name:i.name,email:i.email,photo:null,errors:{}}),r=u(null),p=u({}),n=s=>{e.photo=s.target.files[0]},l=()=>{const s=new FormData;s.append("_method","PATCH"),s.append("name",e.name),s.append("email",e.email),e.photo&&s.append("photo",e.photo),z.post(route("profile.update"),s,{preserveScroll:!0,preserveState:!0,forceFormData:!0,onSuccess:()=>{e.photo=null,r.value&&(r.value.value="")},onError:t=>{p.value=t}})};return(s,t)=>(d(),c("section",null,[t[5]||(t[5]=a("header",null,[a("h2",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"}," Profile Information "),a("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"}," Update your account's profile information and email address. ")],-1)),a("form",{onSubmit:V(l,["prevent"]),class:"mt-6 space-y-6",enctype:"multipart/form-data"},[a("div",null,[o(y,{for:"name",value:"Name"}),o(I,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=m=>e.name=m),required:"",autofocus:"",autocomplete:"name"},null,8,["modelValue"]),o(x,{class:"mt-2",message:e.errors.name},null,8,["message"])]),a("div",null,[o(y,{for:"email",value:"Email"}),o(I,{id:"email",type:"email",class:"mt-1 block w-full",modelValue:e.email,"onUpdate:modelValue":t[1]||(t[1]=m=>e.email=m),required:"",autocomplete:"username"},null,8,["modelValue"]),o(x,{class:"mt-2",message:e.errors.email},null,8,["message"])]),a("div",null,[o(y,{for:"photo",value:"Profile Photo"}),o(N,{id:"photo",type:"file",onChange:n,class:"mt-1 block w-full",accept:"image/*",ref_key:"photoInput",ref:r},null,512),o(x,{class:"mt-2",message:e.errors.photo},null,8,["message"])]),f.mustVerifyEmail&&w(i).email_verified_at===null?(d(),c("div",j,[a("p",M,[t[3]||(t[3]=v(" Your email address is unverified. ")),o(w($),{href:s.route("verification.send"),method:"post",as:"button",class:"rounded-md text-sm text-gray-600 dark:text-gray-400 underline hover:text-gray-900 dark:hover:text-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800"},{default:h(()=>t[2]||(t[2]=[v(" Click here to re-send the verification email. ")])),_:1},8,["href"])]),P(a("div",T," A new verification link has been sent to your email address. ",512),[[U,f.status==="verification-link-sent"]])])):b("",!0),a("div",q,[o(D,{disabled:e.processing},{default:h(()=>t[4]||(t[4]=[v("Save")])),_:1},8,["disabled"]),o(F,{"enter-active-class":"transition ease-in-out","enter-from-class":"opacity-0","leave-active-class":"transition ease-in-out","leave-to-class":"opacity-0"},{default:h(()=>[e.recentlySuccessful?(d(),c("p",R," Saved. ")):b("",!0)]),_:1})])],32)]))}};export{J as default};
